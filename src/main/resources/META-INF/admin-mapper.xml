<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="AdminMapper">

	
	<delete id="delete">
	delete from md
	where md_id=#{no}
	</delete>
	
	
	
	
	
	
	<select id="searchListCount" parameterType="kr.co.sbsj.util.dto.SearchDTO" resultType="int">
		select count(m.md_id) cnt
		from md m
		<if test="searchOption != null and searchOption != ''
					and searchWord != null and searchWord !=''">
			<choose>
				<when test="searchOption == 'md_name'">
					where m.md_name like concat('%', #{searchWord}, '%')
				</when>
				<when test="searchOption == 'md_category'">
					where md_category like concat('%', #{searchWord}, '%')
				</when>
			</choose>
		</if>
	
	</select>
	
	
	<select id="selectList" parameterType="kr.co.sbsj.util.dto.SearchDTO"
			resultType="kr.co.sbsj.md.MdDTO">
		select m.md_id, m.md_name, m.md_price, m.md_category,  m.md_standard_stock, m.md_sales_rate, m.md_stock
		, m.md_thumbnail_name, m.md_thumbnail_path
    	from md m
		<if test="searchOption != null and searchOption != ''
					and searchWord != null and searchWord !=''">
			<choose>
				<when test="searchOption == 'md_name'">
					where m.md_name like concat('%', #{searchWord}, '%')
				</when>
				<when test="searchOption == 'md_category'">
					where md_category like concat('%', #{searchWord}, '%')
				</when>
			</choose>
		</if>
		order by md_id desc
		limit #{limitNum}, 10
	</select>

	
</mapper>
